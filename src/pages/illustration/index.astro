---
import BaseLayout from '../../layouts/BaseLayout.astro';

const artImages = [
  '/art/stormtrooper.png',
  '/art/parasite.jpg',
  '/art/aneveningwalk.jpg',
  '/art/omgastone.png',
  '/art/pic4.jpg',
  '/art/pic5.jpg',
  '/art/pic6.png',
  '/art/tractor.gif',
];
---

<BaseLayout title="Illustration">
  <section class="art-page">
    <div class="art-carousel" aria-label="Illustration carousel">
      {artImages.map((src) => (
        <figure class="art-slide">
          <img src={src} alt="" loading="lazy" />
        </figure>
      ))}
    </div>
  </section>
</BaseLayout>

<style>
  :global(body) {
    overflow: auto;
  }

  .art-page {
    min-height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }


  .art-carousel {
    display: flex;
    gap: calc(var(--u) * 4);
    width: 100%;
    overflow-x: scroll;
    overflow-y: hidden;
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: none;
    padding-right: calc(var(--u) * 2);
    touch-action: pan-x;
  }

  .art-carousel:focus {
    outline: none;
  }

  .art-slide {
    flex: 0 0 auto;
    height: 100%;
    min-width: min(20vw, 240px);
    scroll-snap-align: start;
    display: grid;
    place-items: center;
  }

  .art-slide img {
    height: min(70vh, 680px);
    width: 100%;
    display: block;
    object-fit: contain;
  }

  @media (max-width: 768px) {
    :global(body) {
      overflow: auto;
    }

    .art-carousel {
      gap: calc(var(--u) * 0.1);
    }


    .art-slide {
      min-width: 70vw;
    }

    .art-carousel {
      padding-right: 20vw;
    }

    .art-slide img {
      width: auto;
      max-width: 70vw;
      height: auto;
      max-height: 45vh;
      object-fit: contain;
    }
  }
</style>

<script is:inline>
  const initCarouselScroll = () => {
    const carousel = document.querySelector('.art-carousel');
    if (!carousel) return;
    const onWheel = (event) => {
      if (!(event instanceof WheelEvent)) return;
      if (event.deltaY === 0 && event.deltaX === 0) return;
      event.preventDefault();
      event.stopPropagation();

      const delta = event.deltaY || event.deltaX;
      const direction = delta > 0 ? 1 : -1;
      const step = carousel.clientWidth * 0.6;
      carousel.scrollBy({ left: step * direction, behavior: 'smooth' });
    };

    if (window.matchMedia('(min-width: 769px)').matches) {
      carousel.onwheel = onWheel;
      carousel.addEventListener('wheel', onWheel, { passive: false });
      document.addEventListener('wheel', onWheel, { passive: false, capture: true });
    }
  };

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initCarouselScroll);
  } else {
    initCarouselScroll();
  }
</script>
