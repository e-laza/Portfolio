---
import BaseLayout from '../../layouts/BaseLayout.astro';

const artImages = [
  '/art/Parasite.jpg',
  '/art/Aneveningwalk.jpg',
  '/art/omgastone.png',
  '/art/pic4.jpg',
  '/art/pic5.jpg',
  '/art/pic6.png',
];
---

<BaseLayout title="Illustration">
  <section class="art-page">
    <div class="art-carousel" aria-label="Illustration carousel">
      {artImages.map((src) => (
        <figure class="art-slide">
          <img src={src} alt="" loading="lazy" />
        </figure>
      ))}
    </div>
  </section>
</BaseLayout>

<style>
  :global(body) {
    overflow: hidden;
  }

  :global(body) .page {
    padding: 0;
    height: 100vh;
  }

  .art-page {
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .art-carousel {
    display: flex;
    gap: calc(var(--u) * 4);
    padding: calc(var(--u) * 4);
    width: 100%;
    height: 100%;
    overflow-x: scroll;
    overflow-y: hidden;
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: none;
  }

  .art-slide {
    flex: 0 0 auto;
    height: 100%;
    min-width: min(70vw, 640px);
    scroll-snap-align: start;
    display: grid;
    place-items: center;
  }

  .art-slide img {
    height: min(70vh, 680px);
    width: 100%;
    display: block;
    object-fit: contain;
  }
</style>

<script is:inline>
  const initCarouselScroll = () => {
    const carousel = document.querySelector('.art-carousel');
    if (!carousel) return;
    carousel.setAttribute('tabindex', '0');
    carousel.focus();

    const onWheel = (event) => {
      if (!(event instanceof WheelEvent)) return;
      if (event.deltaY === 0 && event.deltaX === 0) return;
      event.preventDefault();
      event.stopPropagation();

      const delta = event.deltaY || event.deltaX;
      const direction = delta > 0 ? 1 : -1;
      const step = carousel.clientWidth * 0.6;
      carousel.scrollBy({ left: step * direction, behavior: 'smooth' });
    };

    carousel.onwheel = onWheel;
    carousel.addEventListener('wheel', onWheel, { passive: false });
    document.addEventListener('wheel', onWheel, { passive: false, capture: true });
  };

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initCarouselScroll);
  } else {
    initCarouselScroll();
  }
</script>
